# 四轴飞行器的I2C协议应用
`使用STM32F4的普通IO口模拟I2C协议时序`
`MPU9250和FBM320通信`
`读取相应ID寄存器的值`

设计外设：
GPIO、MPU9250(陀螺仪)、FBM320(气压计)

![[Pasted image 20210315103324.png]]

**I2C通信过程:主机写数据到从机**
主机开始给一个起始信号
主机发送从设备地址和操作类型
如果有从设备地址与主机发送地址相同，从设备就会发送响应
然后写数据
写到`一定程度`从设备返回非应答信号
主机发送停止标志
通信结束

**I2C通信过程:主机读从机数据**
主机开始给一个起始信号
主机发送从设备地址和操作类型
如果有从设备地址与主机发送地址相同，从设备就会发送响应
总线交给从设备，开始读数据
主机响应
主机返回非响应
主机发送停止信号
通信结束

宏定义大致格式如下：
![[Pasted image 20210315104011.png]]

