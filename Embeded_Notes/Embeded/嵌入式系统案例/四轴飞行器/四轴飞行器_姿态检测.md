## 姿态检测
### 姿态检测的基本概念
#### 概念
在飞行器中，飞行姿态是非常重要的参数，以飞机自身的中心建立坐标系，当飞机绕坐标轴旋转时，分别回影响偏航角、横滚角以及俯仰角
![[Pasted image 20210315141354.png]]

假如知道飞机初识是左上角的状态，只要想办法两处基于原始状态的三个姿态角的变化量，在进行叠加，就可以获知它的状态了
参考_**《四轴飞行器设计与实现》**_

#### 坐标系
抽象来说，**姿态是“载体坐标系”与“地理坐标系”之间的转换关系**
![[Pasted image 20210315141818.png]]
**三种常用的坐标系**姿态是“载体坐标系”与“地理坐标系”之间的转换关系
1. 地球坐标系
	以地球球心为原点，Z轴沿地球自转方向，X，Y轴在迟到平面内的坐标系
	
2. 地理坐标系
	远点在地球的表面(或者运载体所在的点)，Z轴沿当前地地理线垂涎的方向(重力加速度方向)，XY轴沿当地经纬线的切线方向。根据各个轴方向的不同，可选为“东北天”，“东南天”，“西北天”等坐标系。
	这是我们日常生活中使用的坐标系，平时说的东南西北方向与这个坐标系东南西北的概念一致
	就是平常说的东西南北
	
3. 载体坐标系
	以运载体的质心为远点，一般根据运载体自身结构方向构成坐标系
	
	
地理坐标系与载体坐标系都以载体为原点，所以他们可以经过简单的旋转进行转换，再提的姿态角就是根据载体坐标系与地理坐标系的夹脚来确定的

姿态角的关系

|坐标系间的旋转角度|说明|载体自身旋转|
|----|----|----|
|偏航角|Y轴与北轴的夹脚|绕载体Z轴旋转可改变|
|俯仰角|Z轴与天轴的夹脚|绕载体X轴旋转可改变|
|横滚角|X轴与东轴的夹脚|绕载体Y轴旋转可改变|

#### 使用陀螺仪检测角度
陀螺仪事是直观的角度检测器，他可以检测物体绕坐标轴转动的“角速度”，如同讲速度对事件积分可以解出路程，将角速度对时间积分就可以算出旋转的角度
![[Pasted image 20210315144503.png]]

#### 陀螺仪检测缺陷
积分误差
由于陀螺仪测量角度时使用积分，会存在积分误差，若积分时间Dt越小，误差就越小
![[Pasted image 20210315145010.png]]

同样的，要提高陀螺仪的采样频率，即可以减小积分误差
更难已解决的是期间本身带来的问题
`例如某种陀螺仪误差是0.1度每秒，当陀螺仪静止不动，理想的角速度应该是0`
`但是存在0.1度每秒的误差，它的采样就一直是0.1度每秒，一小时就是一圈`
只有当正向误差和负方向误差抵消，才能消除这种**累计误差**

#### 利用加速度计检测角度
由于直接用陀螺仪测量角度在长时间测量会产生累计误差，因此引入了检测倾角的传感器
类似于
![[Pasted image 20210315150605.png]]

利用这种原理可以检测**横滚角**和**俯仰角**，但是无法检测**偏航角**
另一个缺陷是加速度传感器并**不会区分重力加速度和外力加速度**
`当物体运动时，它也会在运动的方向检测出加速度，特别是在震动的时候
传感器的数据会有非常大的数据变化，此时难以反应重力的实际值`

#### 磁场检测
为了弥补加速度传感器无法检测偏航角的问题，又引入磁场检测传感器
可以检测各个方向上的磁场大小，通过检测地球磁场，就可以实现指南针的功能
`也被称为电子罗盘`
由于地磁场一地理坐标系的“南北”轴固联，利用磁场检测传感器的指南针功能姐可以测量出偏航角

磁场传感器又会受到外部的磁场干扰

#### 姿态融合与四元数
使用陀螺仪检测角度时，在静止的状态下存在缺陷，且受时间影响，
而加速度传感器检测角度时，在运动状态下存在缺陷
刚好互补，假如同时使用这两种传感器，并设计一个滤波算法
当物体处于静止状态，增大加速度数据的权重
当物体处于运动状态，增大陀螺仪的权重，从而得到更准确的姿态数据

**这些采用多种传感器来检测姿态的处理算法被称为姿态融合**
[[四轴飞行器姿态解算]]