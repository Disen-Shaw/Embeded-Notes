# C语言指针
## 内存

### 内存含义

+ 存储器：计算机的组成中，用来存储程序和数据，辅助CPU进行运算处理的重要部分。
+ 内存：内部存贮器，暂存程序、数据，并且掉电丢失 SRAM、DRAM、DDR
+ 外存：外部存储器，尝试进啊保存程序、数据，掉电不丢失
  ROM、EEPROM、FLASH(NAND\NOR)、硬盘、光盘。内存是沟通CPU与硬盘的桥梁
+ 内存是暂存盘放CPU中的运算数据
+ 暂存与评判等外部存储器交换的数据

### 物理存储器和存储地址空间

**有关内存的两个概念：屋里存储器和存储地址空间**

1. 物理存储器：实际存在的具体存储器芯片。
   + 主板上装插的内存条
   + 显卡上的显示RAM芯片
   + 各种适配卡上的RAM芯片和ROM芯片
2. 存储地址空间：对存储器编码的范围
   + 编码：对每个物理存储单元(一个字节)分配一个号码
   + 寻址：可以根据分配的号码找到相应的存储单元，完成数据的#读写。

### 内存地址

+ 将内存抽象成一个很大的一维字符数组

+ 编码就是对内存的每一个字节分配一个32位或者64位的编号
  (与32位和64位的处理器相关)

+ 内存编号称之为内存地址

  内存中的每一个数据都会分配相应的地址

+ char：占一个字节，分配一个地址

+ int：占四个字节，分配四个地址 

  **找首地址**

+ float、struct和函数等

  Windowss电脑做数据存储采用的小端对齐
  低位数据存储在小的地址编码中，高位数据存储在大的地址编码中

## 指针

### 指针的定义和使用

1. 指针的定义

   数据类型 *指针变量名;

2. 指针的使用：

   针对不同位系统，指针变量的大小不一定相同

   64位为8个字节大小，32位为4个字节大小

   **&是取地址符号，是升维度的**

   ***是取值符号，是降维度的**

   使用方式为

   ~~~c
     signed int a = 10;
     unsigned int *p;
   p = &a;
   // 变量p为指向a的指针
   *p = 100;
   // 可以通过指针直接对变量a进行操作
   // 此时，*p就代表着变量a
   ~~~

## 野指针和空指针

### 野指针

+ 指针变量指向未知空间的指针
+ 操作系统将0-255作为系统占用，不允许访问
+ 操作野指针对应的内存空间可能会报错

### 空指针

+ 空指针指内存地址编号为0的空间
+ 操作空指针对应的空间一定报错！
+ 空指针可以用做条件判断

~~~c
if(p==NULL)
{
    /*处理*/
}
// 用作开辟内存空间
~~~

 ## 万能指针

### **void* 可以指向任何变量的内存空间**

+ 万能指针可以接受任意变量类型的内存地址
+ 在通过万能指针修改变量的值时，需要找到变量对应的指针类型

~~~c
signed int a = 10;
void *p = &a;
// 直接通过p 修改 a 的值会报错
*(int*)p = 100;
~~~

### const修饰的指针变量

在编辑程序时，指针指向必能改变，指针指向的内存可以改变

~~~c
// 常量
const signed int a = 10;
unsigned int *p = &a;
*p = 100;
// 可以讲const修饰的常量进行修改,但是会报警
// 通过define就不可以通过指针进行修改
#define 在数据区，不可以修改
const 定义的常量在栈区，可以修改
~~~

1. const修饰指针类型

   ~~~c
   const unsigned int *p = &a;
   ~~~

   可以修改指针变量的值，但是不能修改指针对应的值

2. const修饰指针变量

   ~~~c
   unsigned int *const p = &a; 
   ~~~

   可以修改指针所指的值，但是不能修改指针变量的值

3. 多级指针以此类推

## 指针和数组

### 数组名

数组名是数组的首元素地址，
数组名是一个常量，不允许赋值
数组最为函数参数，会退化为指针
指针变量在使用时可以替代数组名

## 指针计算

### 指针计算规则

**指针类型变量+1等同于内存地址+sizeof(数组类型)**
但是在通过数组名遍历之后，数组名仍为首元素地址
若对指针直接操作遍历之后，未对指针恢复，指针就会编程野指针

**指针的加减运算和指针的类型有关**
**两个指针相减，得到的结果是两个指针的偏移量(步长)**
**所有指针类型相减结果都是int类型**

### 指针和运算符的操作

+ 两个指针不能相加
+ 两个指针不能相乘相除

## 多级指针

+ C语言允许有多级指针存在，在实际程序中一级指针最常用，其次是二级指针
+ 二级指针是一个指向一级指针变量地址的指针
+ 三级往上基本用不着

利用指针数组和二级指针建立关系，可以利用二级指针间接修改一维数组

## 值传递和地址传递

1. 值传递
   + 形参不影响实参的值
2. 地址传递
   + 形参可以改不安实参的值

## 数组名做函数参数

**数组名做函数参数，函数的形参会退化为指针**

## 指针作为函数的返回值

~~~c
// 实例函数
#include <stdio.h>
signed int a = 10;
int *getA()
{
    return &a;
}
int main()
{
    *( getA() ) = 111;
    printf("a = %d",a);
    return 0;
}
~~~

## 指针和字符串

### 字符指针

~~~c
signed char ch[] = "hello,world";
// 栈区字符串
signed char *p = "hello,world";
// 数据区常量区字符串，只读不可修改
// 在这一区域可以被多个指针所指
// 平时操作字符串以
signed char[] = "hello,world";
// 这种形式就可以
~~~

### 字符串数组

~~~c
// 指针数组
signed char ch1[] = "hello";
signed char ch2[] = "world";
signed char ch3[] = "heihei";
char *arr[] = {ch1,ch2,ch3}
// 字符串数组
char *arr = {"hello","world","heihei"};

// 字符串冒泡排序
for(int i = 0 ; i < 2 ; i++)
{
    for(int j = 0 ; j < 2 - i; j++ )
    {
        char *temp = arr[j];
        arr[j] = arr[j+1];
        arr[j+1] = temp;
    }
}
~~~
