# AT指令

## AT基础指令

| 指令类型 | 指令   | 返回值 |
| -------- | ------ | ------ |
| 测试命令 | AT     | OK     |
| 复位命令 | AT+RST | OK     |

### 设置指令

#### 设置波特率

| 指令              | 返回 |
| ----------------- | ---- |
| AT+CIOBAUD=波特率 | OK   |

+ 默认波特率为115200

还可以取值为：1200、2400、4800、9600、14400、19200、38400、43000、57600、76800、115200、128000、230400以及自定义。

#### 设置工作模式

| 指令           | 返回值 |
| -------------- | ------ |
| AT+CEMODE=模式 | OK     |

#### 模式取值：

| 取值 | 说明                     |
| ---- | ------------------------ |
| 1    | station模式(客户端)      |
| 2    | AP模式(服务器，热点)     |
| 3    | station+AP模式(混合模式) |

#### AP模式下的参数

| 指令                                         | 返回 |
| -------------------------------------------- | ---- |
| AT+CWSAP="WIFI名","密码","通信号","加密方式" | OK   |

说明：

| 定义     | 说明             |
| -------- | ---------------- |
| 通道号   | 字符串，1~14任选 |
| 加密方式 | 0(OPEN)          |
| 加密方式 | 1(WEP)           |
|加密方式|2(WPA-PSK)|
|加密方式|3(WPA2-PSK)|
|加密方式|4(WPA-WPA2-PSK)|

#### 设置透传模式

| 指令            | 返回 |
| --------------- | ---- |
| AT+CIPMODE=模式 | OK   |

参数：

| 取值 | 说明             |
| ---- | ---------------- |
| 0    | 非透传，缺省模式 |
| 1    | 透明传输         |

#### 设置为服务器

| 指令                  | 返回 |
| --------------------- | ---- |
| AT+CIPSERVER=1,端口号 | OK   |

端口号一般为8080

#### 设置为多连接

| 指令           | 返回 |
| -------------- | ---- |
| AT+CIPMUX=模式 | OK   |

模式取值：

| 取值 | 说明       |
| ---- | ---------- |
| 0    | 单连接模式 |
| 1    | 多连接模式 |

#### 加入AP

| 指令                     | 返回 |
| ------------------------ | ---- |
| AT+CWJAP="WIFI名","密码" | OK   |

#### 设置退出AP

| 指令     | 返回 |
| -------- | ---- |
| AT+CWQAP | OK   |

#### 设置发送数据

| 状态 | 指令 |
| ---- | ---- |
| 单路连接(AT+CIPMUX=0) | AT+CIPSEND=Length |
|多路连接(AT+CIPMUX=1)|AT+CIPSEND=ID，Length|

说明：

+ 模块收到指令后先换行返回">"，然后开始接受串口数据。
+ 当数据长度满Length时发送数据，如果未建立连接或者连接被断开，返回ERROR
+ 如果未建立连接或者连接被断开，返回ERROR。
+ 如果数据发送成功，返回SEND OK，ID为客户端编号。

#### 设置服务器主动断开时间

| 指令              | 返回                         |
| ----------------- | ---------------------------- |
| AT+CIPSTO=Timeout | 断开时间(0-28800s)           |
| 参数              | 说明                         |
| Timeout           | 服务器主动断开时间(0-28899s) |



### 查询指令

#### 查询服务器主动断开事件

| 指令        | 返回               |
| ----------- | ------------------ |
| AT+CIPSTO？ | 断开时间(0-28800s) |

#### 查询是否透传

| 指令         | 返回     |
| ------------ | -------- |
| AT+CIPMODE？ | 当前模式 |

#### 查询本地IP地址

| 指令     | 返回       |
| -------- | ---------- |
| AP+CIFSR | 当前IP地址 |

#### 查询是否为多连接

| 指令        | 返回     |
| ----------- | -------- |
| AT+CIPMUX？ | 当前模式 |

#### 查询当前AP配置的参数

| 指令     | 返回     |
| -------- | -------- |
| AT+CWSAP | 当前参数 |

#### 查询当前连接的AP

| 指令     | 返回       |
| -------- | ---------- |
| AT+CWJAP | 当前AP信息 |

#### 查询当前的工作模式

| 指令        | 返回     |
| ----------- | -------- |
| AT+CWMODE？ | 当前模式 |

