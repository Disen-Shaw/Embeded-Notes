# PID控制
## PID定义
将**偏差**的**比例(Proportion)**、**积分(Integral)**和**微分(Differential)**通过**线性组合**构成控制量，用这一控制量对被控对象进行控制，这样的控制器成为PID控制器  
## PID控制
当被控对象的结构和参数不能完全掌握，或得不到精确的数学模型时，控制理论的其他技术难以采用时，系统控制器的结构和参数必须依靠经验和现场调试来确定、这是应用PID控制技术最方便  
当不了解一个系统和被控对象，或不能通过有效的测量手段来获得系统参数时，最适合用PID控制技术  

PID控制，实际中也有PI和PD控制  
PID控制器就是根据系统的误差，利用比例、积分、微分计算出控制量进行控制的  

在程序里比较高效的做法是用一个**数学公式实现**，该公式有一个**变量**，当前运行与目标值的差值(有正负之分)，公式的结果就是输出控制，并且这个数值可以实现自动调节的效果   

### P比例控制
比例控制是一种最简单的控制方法，其控制器的输出与输入信号误差城比例关系  
`当仅有比例控制时系统输出存在稳态误差，假设输入误差为0,那么输出误差也为0,这样时不行的`  
比例控制控制考虑**当前误差**，误差值和一个正常的常数Kp(比例系数)相乘  
Kp只是在控制器的输出和系统的误差成比例时才成立  
公式为$Pout = K_p*e(t)$  
比例系数大，在相同误差下有比较大的输出，但是若比例增益过大，会使系统不稳定  
相反的，若比例系数小，在相同误差下输出小，因此控制器会比较不敏感，若比例增益太小，当有干扰时其控制信号可能不够大，无法修正干扰的影响  

#### 稳态误差
比例控制中，经过一段时间以后**误差稳定在一定值**，此时误差叫做**稳态误差**，只用比例控制的时候，根据伏在地变动及设备固有特性不同，会出现不同的稳态误差  
负载特性与控制特性曲线的交点和设定值不一致是产生稳态误差的原因  
公式为$Pout = K_p*e(t) = K_p*(SV-PV)$  
`SV为设定值`  
`PV为测量值`  
比例控制在误差为0时，其输出也会为0  
若要让受控输出为**非零**的数值，就需要一个**稳态误差**或**偏移量**  
稳态误差和比例增益成正比，和受控系统本身的增益成反比  
**若加入一个偏置，或者是加入积分控制，可以消除稳态误差**  

### I积分控制
积分控制中，控制器的输出与输入误差信号的积分成正比关系  
对一个自动控制系统，如果在进入稳态后存在稳态误差，则成这个控制系统是有稳态误差的或者简称为有差系统，在控制器中必须加入“积分项”  

积分项对误差取决于时间的积分，随着时间的增加，积分项会增大。这样即使误差很小，积分项也会随着时间的增大而增大，推动控制器的输出是稳态误差进一步减小，直到等于0  
因此，比例P+积分I为PI可哦拿之气，可以时系统在进入稳态之后无稳态误差  

积分考虑**过去误差**，将过去一段时间**误差值和乘以**一个**正值**的常数Ki，Ki从过去的平均误差值来找到系统的输出结果和与定制的平均误差  
一个简单的比例系统会震荡，会在预定值的附近来会变，因为系统无法消除多余的纠正。通过加上累积的平均误差值，平均系统误差值就会渐渐减小  
所以最终这个PID贿赂系统会在设计值稳定下来  
公式为：$Iout = K_i * \int_0^t (e)tdt$  
积分控制会加速系统趋近设定值的过程，并且消除春比例控制器会出现的稳态误差  
积分增益越大，趋近设定值的速度越快，不过因为积分控制会累积过去所有的误差，可能会使输出出现**过冲**的现象  
在很多系统中使用PI算法就可以得到很好的控制

### D微分控制
在微分控制中，控制器的输入与输出 **误差信号的微分(误差的变化率)** 成正比关系。自动控制系统在克服误差的调节过程中可能会出现**振荡**甚至**失稳**，其原因是由于存在 **较大惯性组件(环节)** 或者有 **滞后** 组件具有**抑制误差**的作用，其变化总是落后于误差的变化  
解决办法是使抑制误差的作用的变化超前，即在误差接近零时，抑制误差的作用就应该是0  

这就是说控制器只引入“比例”项是往往是不够的，比例项的作用只是放大误差的幅值，而目前需要增加的是“微分项”，它能够预测误差变化的趋势，这样，具有比例+微分的控制器，就能够**提前使抑制误差的控制作用等于0,甚至为负值**，从而**避免了被控量的严重超调**  
所以对**较大惯性**或者**滞后**的被控对象，比如给水加热，比例+微分(PD)控制器能改善系统在调节过程中的动态特性  

微分控制考虑**将来误差**，计算误差的一阶导数，并和一个正值的常数Kd相称  
这个**导数**的控制会对**系统的改变**做出反应。导数的结果越大(说明系统误差变化率大)，那么控制系统对输出结果做出更快速的反应  
`这个Kd参数也是PID被称为可以册的控制器的原因`  
Kd参数对减小控制器短期的改变很有帮助  
公式为：$Pout = K_d * de(t)/dt$  

微分控制器可以提升整定时间和系统稳定性，不过因为**纯微分器不是因果系统**，因此在PID系统实现时，一般会为微分控制器加上一个**低通滤波**以限制高频增益和噪声  
`实际上较少用到微分控制`

**微分项不能单独使用，必须配合比例控制**  

[[算法_PID_模拟PID控制原理]]